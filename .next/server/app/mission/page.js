(()=>{var e={};e.id=710,e.ids=[710],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},7933:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var r=s(482),a=s(9108),o=s(2563),n=s.n(o),i=s(8300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let c=["",{children:["mission",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5857)),"/Users/kavinthakur/Desktop/code/codeday-game/app/mission/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3966)),"/Users/kavinthakur/Desktop/code/codeday-game/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/kavinthakur/Desktop/code/codeday-game/app/mission/page.tsx"],u="/mission/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/mission/page",pathname:"/mission",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8262:(e,t,s)=>{Promise.resolve().then(s.bind(s,3338))},3338:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>M});var r=s(5344),a=s(3729),o=s(9038);function n(){let e=(0,a.useRef)(!1);return(0,o.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var i=s(228),l=s(5986),c=s(207);class d extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function u({children:e,isPresent:t}){let s=(0,a.useId)(),r=(0,a.useRef)(null),o=(0,a.useRef)({width:0,height:0,top:0,left:0});return(0,a.useInsertionEffect)(()=>{let{width:e,height:a,top:n,left:i}=o.current;if(t||!r.current||!e||!a)return;r.current.dataset.motionPopId=s;let l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${a}px !important;
            top: ${n}px !important;
            left: ${i}px !important;
          }
        `),()=>{document.head.removeChild(l)}},[t]),a.createElement(d,{isPresent:t,childRef:r,sizeRef:o},a.cloneElement(e,{ref:r}))}let p=({children:e,initial:t,isPresent:s,onExitComplete:r,custom:o,presenceAffectsLayout:n,mode:i})=>{let d=(0,c.h)(h),p=(0,a.useId)(),m=(0,a.useMemo)(()=>({id:p,initial:t,isPresent:s,custom:o,onExitComplete:e=>{for(let t of(d.set(e,!0),d.values()))if(!t)return;r&&r()},register:e=>(d.set(e,!1),()=>d.delete(e))}),n?void 0:[s]);return(0,a.useMemo)(()=>{d.forEach((e,t)=>d.set(t,!1))},[s]),a.useEffect(()=>{s||d.size||!r||r()},[s]),"popLayout"===i&&(e=a.createElement(u,{isPresent:s},e)),a.createElement(l.O.Provider,{value:m},e)};function h(){return new Map}var m=s(6828),g=s(7222);let x=e=>e.key||"",f=({children:e,custom:t,initial:s=!0,onExitComplete:r,exitBeforeEnter:l,presenceAffectsLayout:c=!0,mode:d="sync"})=>{var u;(0,g.k)(!l,"Replace exitBeforeEnter with mode='wait'");let h=(0,a.useContext)(m.p).forceRender||function(){let e=n(),[t,s]=(0,a.useState)(0),r=(0,a.useCallback)(()=>{e.current&&s(t+1)},[t]);return[(0,a.useCallback)(()=>i.Wi.postRender(r),[r]),t]}()[0],f=n(),y=function(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}(e),v=y,b=(0,a.useRef)(new Map).current,N=(0,a.useRef)(v),w=(0,a.useRef)(new Map).current,D=(0,a.useRef)(!0);if((0,o.L)(()=>{D.current=!1,function(e,t){e.forEach(e=>{let s=x(e);t.set(s,e)})}(y,w),N.current=v}),u=()=>{D.current=!0,w.clear(),b.clear()},(0,a.useEffect)(()=>()=>u(),[]),D.current)return a.createElement(a.Fragment,null,v.map(e=>a.createElement(p,{key:x(e),isPresent:!0,initial:!!s&&void 0,presenceAffectsLayout:c,mode:d},e)));v=[...v];let E=N.current.map(x),k=y.map(x),j=E.length;for(let e=0;e<j;e++){let t=E[e];-1!==k.indexOf(t)||b.has(t)||b.set(t,void 0)}return"wait"===d&&b.size&&(v=[]),b.forEach((e,s)=>{if(-1!==k.indexOf(s))return;let o=w.get(s);if(!o)return;let n=E.indexOf(s),i=e;i||(i=a.createElement(p,{key:x(o),isPresent:!1,onExitComplete:()=>{b.delete(s);let e=Array.from(w.keys()).filter(e=>!k.includes(e));if(e.forEach(e=>w.delete(e)),N.current=y.filter(t=>{let r=x(t);return r===s||e.includes(r)}),!b.size){if(!1===f.current)return;h(),r&&r()}},custom:t,presenceAffectsLayout:c,mode:d},o),b.set(s,i)),v.splice(n,0,i)}),v=v.map(e=>{let t=e.key;return b.has(t)?e:a.createElement(p,{key:x(e),isPresent:!0,presenceAffectsLayout:c,mode:d},e)}),a.createElement(a.Fragment,null,b.size?v:v.map(e=>(0,a.cloneElement)(e)))};var y=s(7916),v=s(9224);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let b=(0,v.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var N=s(3485);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let w=(0,v.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),D=(0,v.Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);var E=s(4513),k=s(783),j=s.n(k),A=s(1716),T=s(8243);s(1275),s(7813);var C=s(3658);s(3340);class F{async initialize(){try{throw Error("MetaMask not found")}catch(e){throw console.error("‚ùå SpaceLaunchGameService initialization failed:",e),this.isInitialized=!1,this.provider=null,this.signer=null,this.contract=null,this.nftContract=null,e}}ensureInitialized(){if(!this.isInitialized||!this.contract||!this.nftContract)throw console.error("‚ùå Service not initialized:"),console.error("  - isInitialized:",this.isInitialized),console.error("  - contract exists:",!!this.contract),console.error("  - nftContract exists:",!!this.nftContract),Error("SpaceLaunchGameService not initialized. Call initialize() first.")}isReady(){return this.isInitialized&&!!this.contract&&!!this.nftContract}async getPlayerStats(e){this.ensureInitialized();try{console.log("Fetching player stats for address:",e);let[t,s,r]=await Promise.all([this.contract.successfulLaunches(e),this.contract.launchAttempts(e),this.contract.galacticWon(e)]),a={successfulLaunches:Number(t),launchAttempts:Number(s),galacticWon:C.dF(r),successRate:s>0?Number(t)/Number(s)*100:0};return console.log("Player stats:",a),a}catch(e){throw console.error("Error fetching player stats:",e),e}}async getGameSettings(){this.ensureInitialized();try{return{rewardAmount:"100",successRate:49}}catch(e){throw console.error("Error fetching game settings:",e),e}}async checkNFTApproval(e,t){this.ensureInitialized();try{console.log("\uD83D\uDD0D Checking NFT approval for token:",e,"user:",t);let s=await this.contract.getAddress();console.log("\uD83C\uDFAF Game contract address:",s);let r=await this.nftContract.isApprovedForAll(t,s);return console.log("‚úÖ Is approved for all:",r),r}catch(e){return console.error("‚ùå Error checking NFT approval:",e),!1}}async approveNFT(e){this.ensureInitialized();try{console.log("\uD83D\uDD10 Approving NFT for token:",e);let t=await this.contract.getAddress();console.log("\uD83C\uDFAF Approving for game contract:",t);let s=await this.nftContract.setApprovalForAll(t,!0);console.log("\uD83D\uDCDD Approval transaction sent:",s.hash);let r=await s.wait();return console.log("‚úÖ Approval confirmed in block:",r.blockNumber),s}catch(e){throw console.error("‚ùå Error approving NFT:",e),e}}async launchMission(e){this.ensureInitialized();try{console.log("\uD83D\uDE80 Launching mission for token ID:",e);let t=await this.contract.getAddress();console.log("Contract address:",t);let s=await this.signer.getAddress();console.log("Signer address:",s);try{let t=await this.nftContract.ownerOf(e);if(console.log("Token owner:",t),console.log("User is owner:",t.toLowerCase()===s.toLowerCase()),t.toLowerCase()!==s.toLowerCase())throw Error(`You don't own token ID ${e}. Owner: ${t}`)}catch(t){throw console.error("‚ùå Token ownership check failed:",t),Error(`Token ${e} ownership validation failed: ${t}`)}try{let r=await this.nftContract.isApprovedForAll(s,t);if(console.log("Is approved for all:",r),!r)throw Error(`Token ${e} is not approved for the game contract. Please approve first.`)}catch(t){throw console.error("‚ùå Token approval check failed:",t),Error(`Token ${e} approval validation failed: ${t}`)}console.log("‚úÖ Pre-flight validation passed, proceeding with mission...");let r=await this.contract.launchMission(e);console.log("Transaction sent:",r.hash),console.log("Waiting for transaction confirmation...");let a=await r.wait();console.log("Transaction confirmed in block:",a.blockNumber),console.log("Gas used:",a.gasUsed.toString()),console.log("Parsing transaction logs..."),console.log("Total logs:",a.logs.length);let o=a.logs.find(e=>{try{let t=this.contract.interface.parseLog(e);return console.log("Parsed log:",t?.name,t?.args),t?.name==="LaunchResult"}catch(e){return console.log("Failed to parse log:",e),!1}}),n=!1;if(o){let e=this.contract.interface.parseLog(o);n=e?.args?.success||!1,console.log("\uD83C\uDFAF Mission result:",n?"SUCCESS":"FAILURE"),console.log("Event args:",e?.args)}else console.warn("‚ö†Ô∏è No LaunchResult event found in transaction logs");let i={success:n,txHash:r.hash};return console.log("Final result:",i),i}catch(t){if(console.error("‚ùå Error launching mission:",t),"CALL_EXCEPTION"===t.code&&t.data){console.error("\uD83D\uDCDD Contract revert details:"),console.error("  - Error code:",t.code),console.error("  - Error data:",t.data),console.error("  - Transaction:",t.transaction);let s=t.data?.slice(0,10),r={"0x7e273289":"TokenNotOwned(uint256)","0x8f4eb604":"TokenNotApproved(uint256)","0x3ee5aeb5":"GamePaused()","0x4ca88867":"InvalidToken(uint256)"}[s];if(r)throw console.error("\uD83D\uDD0D Decoded error:",r),Error(`Mission failed: ${r}. Please check token ownership and approval.`);throw console.error("‚ö†Ô∏è Unknown custom error signature:",s),Error(`Mission failed with contract error. Token ID: ${e}. Please ensure you own the token and it's approved.`)}throw t}}onLaunchResult(e){if(!this.contract)throw Error("Contract not initialized");this.contract.on("LaunchResult",(t,s,r)=>{e(t,s.toString(),r)})}removeAllListeners(){this.contract&&this.contract.removeAllListeners()}constructor(){this.provider=null,this.signer=null,this.contract=null,this.nftContract=null,this.isInitialized=!1}}let S=new F;var I=s(7110);let R=["/images/space-stars.jpg","/images/cloud-sea.jpg","/images/space-3.jpg","/images/space-4.jpg","/images/space-5.jpg","/images/space-6.jpg","/images/space-7.jpg","/images/space-8.jpg","/images/space-9.jpg"];function M(){let{isConnected:e,account:t}=(0,A.useWeb3)(),[s,o]=(0,a.useState)([]),[n,i]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(!1),[p,h]=(0,a.useState)(3),[m,g]=(0,a.useState)(!1),[x,v]=(0,a.useState)(0),[k,C]=(0,a.useState)(!1),[F,M]=(0,a.useState)(!1),[L,P]=(0,a.useState)(null),[z,O]=(0,a.useState)(1920),[U,$]=(0,a.useState)(1080),[_,q]=(0,a.useState)(!1),[G,H]=(0,a.useState)(!1),[Z,Y]=(0,a.useState)({rewardAmount:"100",successRate:49}),[W,B]=(0,a.useState)({successfulLaunches:0,launchAttempts:0,galacticWon:"0",successRate:0}),[V,K]=(0,a.useState)(!1),[Q,X]=(0,a.useState)(!1),[J,ee]=(0,a.useState)(!1),[et,es]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{if(!e||!t){c(!1);return}try{c(!0);let e="0xc624865cD93c176a6016814e3560753b7Cb26C38";console.log("\uD83C\uDFAF Fetching NFTs from contract:",e);let s=await T.Z_.getNFTsForOwner(t,e);console.log("\uD83C\uDFAE Found NFTs from new contract:",s.length),o(s),s.length>0&&i(s[0]),c(!1)}catch(e){console.error("Error fetching NFTs:",e),o([]),c(!1)}})()},[e,t]),(0,a.useEffect)(()=>{(async()=>{if(!e||!t){console.log("Skipping blockchain initialization - not connected or no account");return}try{console.log("\uD83D\uDD17 Initializing blockchain services for account:",t),await S.initialize(),console.log("\uD83D\uDCCA Fetching game settings and player stats...");let[e,s]=await Promise.all([S.getGameSettings(),S.getPlayerStats(t)]);console.log("‚úÖ Game settings:",e),console.log("‚úÖ Player stats:",s),Y(e),B(s),es(!0),console.log("\uD83C\uDFAF Service fully initialized and ready for missions")}catch(e){console.error("‚ùå Error initializing blockchain services:",e),es(!1),Y({rewardAmount:"100",successRate:49}),B({successfulLaunches:0,launchAttempts:0,galacticWon:"0",successRate:0})}})()},[e,t]),(0,a.useEffect)(()=>{(async()=>{if(!n||!t){K(!1);return}try{let e=await S.checkNFTApproval(n.tokenId,t);K(e)}catch(e){console.error("Error checking NFT approval:",e),K(!1)}})()},[n,t]),(0,a.useEffect)(()=>()=>{},[]);let er=e=>({"STELLAR VOYAGER":"/rockets/1.svg","NEBULA HUNTER":"/rockets/2.svg","QUANTUM DESTROYER":"/rockets/3.svg"})[e]||"/rockets/1.svg",ea=async()=>{if(!n||!t){console.error("‚ùå Cannot approve: no ship selected or account not connected");return}console.log("\uD83D\uDD10 Starting NFT approval process for ship:",n.tokenId),X(!0);try{if(!et||!S.isReady()){if(console.log("‚ö†Ô∏è Service not ready, initializing before approval..."),console.log("  - serviceInitialized state:",et),console.log("  - spaceLaunchGameService.isReady():",S.isReady()),await S.initialize(),!S.isReady())throw Error("Service initialization failed - service is not ready after initialize()");es(!0),console.log("‚úÖ Service successfully initialized and ready")}console.log("\uD83D\uDE80 Calling spaceLaunchGameService.approveNFT..."),await S.approveNFT(n.tokenId),await S.checkNFTApproval(n.tokenId,t)?(K(!0),console.log("‚úÖ NFT approval successful!"),alert("‚úÖ NFT approved successfully! You can now launch the mission.")):(console.error("‚ùå Approval verification failed"),alert("‚ùå Approval verification failed. Please try again."))}catch(e){console.error("‚ùå Error approving NFT:",e),alert(`‚ùå Failed to approve NFT: ${e instanceof Error?e.message:String(e)}`)}finally{X(!1)}},eo=async()=>{if(!n)throw console.error("‚ùå No ship selected for mission"),Error("No ship selected for mission");console.log("\uD83C\uDFAE Executing blockchain mission for ship:",n.tokenId),console.log("\uD83C\uDFAE Ship type:",n.shipType),console.log("\uD83C\uDFAE Account:",t),console.log("\uD83D\uDD27 Service initialized:",et),console.log("\uD83D\uDD0D Selected ship full data:",n),console.log("\uD83D\uDD0D Token ID type:",typeof n.tokenId),console.log("\uD83D\uDD0D Token ID value:",JSON.stringify(n.tokenId));try{if(!et||!S.isReady()){if(console.log("‚ö†Ô∏è Service not ready for mission, initializing..."),console.log("  - serviceInitialized state:",et),console.log("  - spaceLaunchGameService.isReady():",S.isReady()),await S.initialize(),!S.isReady())throw Error("Service initialization failed - service is not ready after initialize()");let[e,s]=await Promise.all([S.getGameSettings(),S.getPlayerStats(t)]);Y(e),B(s),es(!0),console.log("‚úÖ Service successfully initialized and ready for mission")}console.log("\uD83D\uDE80 Calling spaceLaunchGameService.launchMission...");let e=await S.launchMission(n.tokenId);if(console.log("‚úÖ Mission execution result:",e),t){console.log("\uD83D\uDCCA Updating player stats after mission...");let e=await S.getPlayerStats(t);console.log("\uD83D\uDCCA Updated stats:",e),B(e)}return e.success?console.log("\uD83C\uDF89 Mission succeeded!"):(console.log("\uD83D\uDCA5 Mission failed - removing ship from user NFTs"),o(e=>e.filter(e=>e.tokenId!==n.tokenId))),e}catch(e){throw console.error("‚ùå Error executing blockchain mission:",e),e}},en=async()=>{if(n&&V){ee(!0);try{console.log("\uD83D\uDE80 Starting mission: Transaction first, then animation"),console.log("\uD83D\uDCB0 Step 1: Executing blockchain transaction...");let e=await eo();console.log("‚úÖ Transaction completed! Result:",e),P(e),console.log("\uD83C\uDFAC Step 2: Starting cinematic experience..."),u(!0),h(3);let t=setInterval(()=>{h(e=>e<=1?(clearInterval(t),u(!1),g(!0),v(0),0):e-1)},1e3)}catch(e){console.error("‚ùå Mission launch failed during transaction:",e),ee(!1),alert(`Mission failed: ${e instanceof Error?e.message:String(e)}`)}}};return((0,a.useEffect)(()=>{if(!m)return;let e=setInterval(()=>{v(e=>e>=R.length-1?(g(!1),q(!0),H(!0),setTimeout(()=>{console.log("\uD83C\uDFAF Showing mission results from blockchain..."),q(!1),H(!1),C(!0),M(L?.success||!1),ee(!1),L?.success||i(null)},1e3),e):(q(!0),H(!0),setTimeout(()=>{q(!1),H(!1)},500),e+1))},3e3);return()=>clearInterval(e)},[m]),e)?(0,r.jsxs)("div",{className:"min-h-screen bg-black relative",children:[r.jsx(I.Z,{}),!d&&!m&&!k&&(0,r.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-12",children:[(0,r.jsxs)(j(),{href:"/fleet",className:"flex items-center space-x-2 text-gray-400 hover:text-white transition-colors",children:[r.jsx(b,{className:"w-5 h-5"}),r.jsx("span",{children:"Back to Fleet"})]}),r.jsx("h1",{className:"text-4xl font-bold text-white",children:"Mission Control"}),r.jsx("div",{className:"w-20"})]}),l?(0,r.jsxs)("div",{className:"text-center py-20",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Loading fleet..."})]}):0===s.length?(0,r.jsxs)("div",{className:"text-center py-20",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"No Ships Available"}),r.jsx("p",{className:"text-gray-400 mb-6",children:"You need ships to launch missions"}),r.jsx(j(),{href:"/marketplace",children:r.jsx("button",{className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Get Ships"})})]}):(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-12",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Select Your Ship"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:s.map(e=>{let t=T.fO[e.shipType],s=n?.tokenId===e.tokenId;return r.jsx("div",{onClick:()=>i(e),className:`p-6 rounded-xl cursor-pointer transition-all duration-300 ${s?"bg-blue-600/20 border-2 border-blue-500":"bg-gray-800 border border-gray-700 hover:border-gray-600"}`,children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("img",{src:er(e.shipType),alt:t.name,className:"w-16 h-16 mx-auto mb-4"}),r.jsx("h3",{className:"font-bold text-white mb-2",children:t.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-400 mb-3",children:["#",e.tokenId," ‚Ä¢ Level ",e.level]}),(0,r.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,r.jsxs)("span",{className:"text-yellow-400",children:["‚ö°",t.stats.speed]}),(0,r.jsxs)("span",{className:"text-blue-400",children:["\uD83D\uDEE1Ô∏è",t.stats.armor]}),(0,r.jsxs)("span",{className:"text-green-400",children:["\uD83C\uDF40",t.stats.luck]})]})]})},e.tokenId)})})]}),n&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 mb-8",children:[r.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Mission Brief"}),(0,r.jsxs)("p",{className:"text-gray-300 mb-6",children:["Launch your ",T.fO[n.shipType].name," on a dangerous mission through the cosmic void.",r.jsx("br",{}),r.jsx("span",{className:"text-red-400 font-bold",children:"Warning: Mission failure will destroy your NFT permanently."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-green-400",children:[Z.successRate,"%"]}),r.jsx("div",{className:"text-sm text-gray-400",children:"Success Rate"})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-400",children:Z.rewardAmount}),r.jsx("div",{className:"text-sm text-gray-400",children:"GALACTIC Reward"})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-red-400",children:"BURN"}),r.jsx("div",{className:"text-sm text-gray-400",children:"On Failure"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-900/50 rounded-lg p-4 mb-6",children:[r.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:"Your Mission History"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Successful Missions:"}),r.jsx("span",{className:"text-green-400 font-bold ml-2",children:W.successfulLaunches})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Total Attempts:"}),r.jsx("span",{className:"text-blue-400 font-bold ml-2",children:W.launchAttempts})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Success Rate:"}),(0,r.jsxs)("span",{className:"text-yellow-400 font-bold ml-2",children:[W.successRate.toFixed(1),"%"]})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-400",children:"GALACTIC Earned:"}),r.jsx("span",{className:"text-purple-400 font-bold ml-2",children:W.galacticWon})]})]})]})]}),V?r.jsx("button",{onClick:en,disabled:J,className:"group relative px-12 py-4 bg-gradient-to-r from-red-600 to-orange-600 text-white font-bold text-xl rounded-xl hover:from-red-700 hover:to-orange-700 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:J?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin inline mr-2"}),"Launching..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(w,{className:"w-6 h-6 inline mr-2"}),"Launch Mission"]})}):r.jsx("button",{onClick:ea,disabled:Q,className:"group relative px-12 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold text-xl rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:Q?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin inline mr-2"}),"Approving..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(N.Z,{className:"w-6 h-6 inline mr-2"}),"Approve NFT"]})}),!V&&r.jsx("p",{className:"text-sm text-gray-400 mt-4 text-center",children:"You must approve your NFT before launching missions"})]})]})]}),r.jsx(f,{children:d&&(0,r.jsxs)(y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0",children:r.jsx("img",{src:"/images/space-stars.jpg",alt:"Space",className:"w-full h-full object-cover opacity-50",onError:e=>{console.log("Countdown background image failed to load:",e.currentTarget.src),e.currentTarget.style.display="none"},onLoad:()=>console.log("Countdown background loaded successfully")})}),r.jsx(y.E.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.5,opacity:0},transition:{duration:.8},className:"relative z-10 text-center",children:r.jsx("div",{className:"text-[25rem] font-bold text-white leading-none",children:p})},p)]})}),r.jsx(f,{children:m&&(0,r.jsxs)(y.E.div,{initial:{opacity:0},animate:{opacity:1,scale:G?[1,1.02,1]:1},exit:{opacity:0},transition:{scale:{duration:.3,repeat:G?3:0}},className:"fixed inset-0 bg-black z-50 overflow-hidden",children:[r.jsx(y.E.div,{initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:1},className:"absolute inset-0",children:r.jsx("img",{src:R[x],alt:`Mission stage ${x+1}`,className:"w-full h-full object-cover",onError:e=>{console.log(`Slideshow image ${x} failed to load:`,e.currentTarget.src),e.currentTarget.style.display="none";let t=e.currentTarget.parentElement;t&&(t.style.background="linear-gradient(45deg, #1a1a2e, #16213e, #0f3460)")},onLoad:()=>console.log(`Slideshow image ${x} loaded successfully`)})},x),(0,r.jsxs)(y.E.div,{initial:{x:-100,y:.5*U},animate:{x:z+100,y:[.5*U,.1*U,.8*U,.2*U,.9*U,.3*U,.7*U,.5*U],rotate:[12,8,16,10,18,6,14,12],scale:_?[1,1.2,1]:1},transition:{duration:3,ease:"easeInOut",y:{duration:3,repeat:0,ease:"easeInOut"},rotate:{duration:3,repeat:0,ease:"easeInOut"},scale:{duration:.5,repeat:_?2:0}},className:"absolute z-10",children:[r.jsx("img",{src:n?er(n.shipType):"/rockets/1.svg",alt:"Ship",className:"w-24 h-24 transform rotate-12 drop-shadow-lg",style:{filter:"drop-shadow(0 0 10px rgba(255,255,255,0.8))"}}),(0,r.jsxs)("div",{className:"absolute right-0 top-1/2 transform translate-x-2 -translate-y-1/2",children:[r.jsx(y.E.div,{animate:{scale:_?[1,1.5,1]:[1,1.1,1],opacity:[.8,1,.8]},transition:{duration:.3,repeat:1/0,ease:"easeInOut"},className:"w-20 h-3 bg-gradient-to-r from-blue-400 via-cyan-300 to-transparent rounded-full"}),r.jsx(y.E.div,{animate:{scale:[1,1.2,1],opacity:[.6,1,.6]},transition:{duration:.2,repeat:1/0,ease:"easeInOut",delay:.1},className:"w-16 h-2 bg-gradient-to-r from-white via-blue-200 to-transparent rounded-full mt-1"}),r.jsx(y.E.div,{animate:{scale:[1,1.3,1],opacity:[.4,.8,.4]},transition:{duration:.15,repeat:1/0,ease:"easeInOut",delay:.2},className:"w-12 h-1 bg-gradient-to-r from-yellow-300 to-transparent rounded-full mt-1"})]})]},`rocket-${x}`),r.jsx("div",{className:"absolute top-8 left-1/2 transform -translate-x-1/2 z-20",children:r.jsx("div",{className:"bg-black/50 backdrop-blur-sm px-6 py-3 rounded-full",children:(0,r.jsxs)("div",{className:"text-white font-bold text-xl",children:["Stage ",x+1," of ",R.length]})})}),r.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 w-80 z-20",children:(0,r.jsxs)("div",{className:"bg-black/50 backdrop-blur-sm p-4 rounded-xl",children:[r.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mb-2",children:r.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(x+1)/R.length*100}%`}})}),(0,r.jsxs)("div",{className:"text-white text-center text-sm",children:["Mission Progress: ",Math.round((x+1)/R.length*100),"%"]})]})})]})}),r.jsx(f,{children:k&&r.jsx(y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.jsxs)(y.E.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},className:`max-w-md w-full p-8 rounded-2xl text-center ${F?"bg-green-600/20 border-2 border-green-500":"bg-red-600/20 border-2 border-red-500"}`,children:[F?(0,r.jsxs)(r.Fragment,{children:[r.jsx(D,{className:"w-20 h-20 text-green-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Mission Success!"}),r.jsx("p",{className:"text-gray-300 mb-6",children:"Your ship has completed the mission successfully!"}),(0,r.jsxs)("div",{className:"bg-black/30 p-4 rounded-xl mb-6",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-400 mb-2",children:"+250 GALACTIC"}),r.jsx("div",{className:"text-sm text-gray-400",children:"Reward Earned"})]})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(E.Z,{className:"w-20 h-20 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Mission Failed!"}),(0,r.jsxs)("p",{className:"text-gray-300 mb-6",children:["Your ship was lost in the cosmic void...",r.jsx("br",{}),r.jsx("strong",{className:"text-red-500",children:"NFT Destroyed"})]}),(0,r.jsxs)("div",{className:"bg-black/30 p-4 rounded-xl mb-6",children:[(0,r.jsxs)("div",{className:"text-lg font-bold text-red-500 mb-2",children:[n&&T.fO[n.shipType].name," #",n?.tokenId]}),r.jsx("div",{className:"text-sm text-gray-400",children:"Lost Forever"})]})]}),r.jsx("button",{onClick:()=>{u(!1),g(!1),C(!1),v(0),h(3)},className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-xl transition-colors",children:"Continue"})]})})})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:[r.jsx(I.Z,{}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Connect Wallet"}),r.jsx("p",{className:"text-gray-400 mb-6",children:"Connect your wallet to access missions"}),r.jsx(j(),{href:"/",children:r.jsx("button",{className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Return Home"})})]})]})}},8243:(e,t,s)=>{"use strict";s.d(t,{Z_:()=>d,fO:()=>n});var r=s(9637);let a=()=>{let e="mKSXhkHH4QGGKApSV9bmVUoFwuetHWWw",t="11155111",s={1:r.Zc.ETH_MAINNET,11155111:r.Zc.ETH_SEPOLIA,137:r.Zc.MATIC_MAINNET,80001:r.Zc.MATIC_MUMBAI}[t]||r.Zc.ETH_SEPOLIA;return console.log("Alchemy Config:",{apiKey:e.substring(0,10)+"...",network:s,chainId:t}),{apiKey:e,network:s}},o=new r.J6(a()),n={"STELLAR VOYAGER":{id:"stellar-voyager",name:"STELLAR VOYAGER",rarity:"COMMON",color:"neon-blue",stats:{speed:65,armor:45,luck:30},description:"A reliable starter ship for cosmic adventures"},"NEBULA HUNTER":{id:"nebula-hunter",name:"NEBULA HUNTER",rarity:"RARE",color:"neon-green",stats:{speed:80,armor:60,luck:35},description:"Enhanced propulsion for deep space missions"},"QUANTUM DESTROYER":{id:"quantum-destroyer",name:"QUANTUM DESTROYER",rarity:"EPIC",color:"neon-purple",stats:{speed:95,armor:85,luck:75},description:"Elite warship with quantum-enhanced capabilities"}},i=e=>{let t=e.name?.toUpperCase()||"";if(e.description?.toUpperCase(),t.includes("STELLAR")||t.includes("VOYAGER"));else if(t.includes("NEBULA")||t.includes("HUNTER"))return"NEBULA HUNTER";else if(t.includes("QUANTUM")||t.includes("DESTROYER"))return"QUANTUM DESTROYER";return"STELLAR VOYAGER"},l=e=>{let t=parseInt(e)||1;return{level:Math.max(1,Math.floor(t%10)+1),experience:t%10*250+100*Math.floor(t/10),missions:Math.floor(t%50)+5*Math.floor(t/100),earnings:parseFloat((t%100/1e3+t%10/100).toFixed(3))}};class c{async testNetworksForNFTs(e){let t=[{name:"Ethereum Mainnet",network:r.Zc.ETH_MAINNET,chainId:"1"},{name:"Ethereum Sepolia",network:r.Zc.ETH_SEPOLIA,chainId:"11155111"},{name:"Polygon Mainnet",network:r.Zc.MATIC_MAINNET,chainId:"137"},{name:"Polygon Mumbai",network:r.Zc.MATIC_MUMBAI,chainId:"80001"}];for(let s of(console.log("\uD83D\uDD0D Testing networks for NFTs..."),t))try{console.log(`
üåê Testing ${s.name} (Chain ID: ${s.chainId})...`);let t=new r.J6({apiKey:"mKSXhkHH4QGGKApSV9bmVUoFwuetHWWw",network:s.network}),a=await t.nft.getNftsForOwner(e,{omitMetadata:!1});console.log(`üìä ${s.name} results:`,{totalCount:a.totalCount,ownedNftsCount:a.ownedNfts?.length||0}),a.ownedNfts&&a.ownedNfts.length>0&&(console.log(`üéØ Found ${a.ownedNfts.length} NFTs on ${s.name}!`),console.log("Sample NFTs:",a.ownedNfts.slice(0,3).map(e=>({tokenId:e.tokenId,contract:e.contract?.address,title:e.title||e.name,tokenType:e.tokenType}))))}catch(e){console.log(`‚ùå ${s.name} failed:`,e.message)}}async getNFTsForOwner(e,t){try{console.log("\uD83D\uDE80 Fetching NFTs for owner:",e),console.log("\uD83D\uDD0D Contract filter:",t||"All contracts"),console.log("\uD83C\uDF10 Current network:",a().network),console.log("\uD83D\uDD11 API Key (first 10 chars):",a().apiKey.substring(0,10)+"...");let s=[...t?[{contractAddresses:[t],omitMetadata:!1}]:[],{omitMetadata:!1},{}],r=null,c=0;for(let t=0;t<s.length;t++)try{console.log(`üì° Trying approach ${t+1}:`,s[t]),r=await o.nft.getNftsForOwner(e,s[t]),c=t+1,console.log(`‚úÖ Approach ${t+1} successful!`);break}catch(e){console.log(`‚ùå Approach ${t+1} failed:`,e);continue}if(!r)throw Error("All approaches failed");console.log("\uD83D\uDCCA Alchemy response (approach "+c+"):",{totalCount:r.totalCount,ownedNftsCount:r.ownedNfts?.length||0,pageKey:r.pageKey,validAt:r.validAt}),r.ownedNfts?.length>0&&console.log("\uD83C\uDFAF First NFT sample:",{tokenId:r.ownedNfts[0].tokenId,title:r.ownedNfts[0].title,name:r.ownedNfts[0].name,contract:r.ownedNfts[0].contract?.address,tokenType:r.ownedNfts[0].tokenType,description:r.ownedNfts[0].description});let d=r.ownedNfts||[];console.log("\uD83D\uDCDD Processing",d.length,"NFTs...");let u=d.map((e,t)=>{console.log(`üîÑ Processing NFT ${t+1}:`,{tokenId:e.tokenId,title:e.title,name:e.name,contract:e.contract?.address,hasMetadata:!!e.metadata});let s=i(e),r=l(e.tokenId),a=String(e.tokenId);return console.log(`üîç Token ID processing:`,{original:e.tokenId,originalType:typeof e.tokenId,converted:a,convertedType:typeof a}),{tokenId:a,contractAddress:e.contract?.address||"",shipType:s,name:e.title||e.name||`Ship #${a}`,description:e.description||n[s].description,image:e.media?.[0]?.gateway||e.media?.[0]?.raw||e.image?.originalUrl||"",mintedAt:new Date().toISOString().split("T")[0],...r,metadata:e.metadata||{}}});return console.log("‚ú® Final processed NFTs:",u.length),console.log("\uD83C\uDFAE Processed NFTs details:",u.map(e=>({tokenId:e.tokenId,name:e.name,shipType:e.shipType,contract:e.contractAddress}))),u}catch(e){return console.error("\uD83D\uDCA5 Error fetching NFTs from Alchemy:",e),console.error("Error details:",{message:e.message,stack:e.stack,name:e.name}),[]}}async getNFTDetails(e,t){try{let s=await o.nft.getNftMetadata(e,t);if(!s)return null;let r=i(s),a=l(t);return{tokenId:s.tokenId,contractAddress:s.contract.address,shipType:r,name:s.name||`Ship #${s.tokenId}`,description:s.description||n[r].description,image:s.image?.originalUrl||s.image?.cachedUrl||"",mintedAt:new Date().toISOString().split("T")[0],...a,metadata:s.raw?.metadata||{}}}catch(e){return console.error("Error fetching NFT details from Alchemy:",e),null}}async getCollectionInfo(e){try{return await o.nft.getContractMetadata(e)}catch(e){return console.error("Error fetching collection info:",e),null}}}let d=new c},3340:(e,t,s)=>{"use strict";s.d(t,{CR:()=>a,qE:()=>r});let r={NFT_CONTRACT:{1:"0x0000000000000000000000000000000000000000",11155111:"0xc624865cD93c176a6016814e3560753b7Cb26C38",31337:"0x0000000000000000000000000000000000000000",default:"0xc624865cD93c176a6016814e3560753b7Cb26C38"},SPACE_LAUNCH_GAME:{1:"0x0000000000000000000000000000000000000000",11155111:"0x4d01f42Fa321C89593428564E89e9c55930C5A3D",31337:"0x0000000000000000000000000000000000000000",default:"0x4d01f42Fa321C89593428564E89e9c55930C5A3D"},ERC20_TOKEN:{1:"0x0000000000000000000000000000000000000000",11155111:"0xe9951582D9F0E8D37F37D0Ef259C5cAaA2E46e4e",31337:"0x0000000000000000000000000000000000000000",default:"0xe9951582D9F0E8D37F37D0Ef259C5cAaA2E46e4e"}};function a(e){let t=e.toString();return r.NFT_CONTRACT[t]||r.NFT_CONTRACT.default}},5857:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>o,__esModule:()=>a,default:()=>n});let r=(0,s(6843).createProxy)(String.raw`/Users/kavinthakur/Desktop/code/codeday-game/app/mission/page.tsx`),{__esModule:a,$$typeof:o}=r,n=r.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[18,156,430,377],()=>s(7933));module.exports=r})();